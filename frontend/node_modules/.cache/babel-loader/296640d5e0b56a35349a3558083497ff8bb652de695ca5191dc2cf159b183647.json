{"ast":null,"code":"import React,{useEffect,useState}from'react';import{fetchUserProfile}from'../services/api';import'./Profile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const[user,setUser]=useState(null);const[error,setError]=useState('');useEffect(()=>{const loadUserProfile=async()=>{try{const data=await fetchUserProfile();setUser(data);}catch(err){setError('Error fetching profile data.');console.error(err);}};loadUserProfile();},[]);if(!user){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading profile...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Profile\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Personal Details\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",user.fullName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",user.phoneNumber]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address:\"}),\" \",`${user.address.address1}, ${user.address.city}, ${user.address.region}`]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Age:\"}),\" \",user.age]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Gender:\"}),\" \",user.gender]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Role:\"}),\" \",user.role]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"purchase-history\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Purchase History\"}),user.purchaseHistory.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No tickets purchased yet.\"}):/*#__PURE__*/_jsx(\"ul\",{children:user.purchaseHistory.map(history=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Event:\"}),\" \",history.ticketId.eventId.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(history.ticketId.eventId.dateOfEvent).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Purchase Date:\"}),\" \",new Date(history.purchaseDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Used:\"}),\" \",history.used?'Yes':'No']}),history.ticketId.QRCode&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"QR Code:\"})}),/*#__PURE__*/_jsx(\"img\",{src:history.ticketId.QRCode,alt:\"QR Code\"})]})]},history.ticketId._id))})]})]});}export default Profile;","map":{"version":3,"names":["React","useEffect","useState","fetchUserProfile","jsx","_jsx","jsxs","_jsxs","Profile","user","setUser","error","setError","loadUserProfile","data","err","console","children","className","fullName","email","phoneNumber","address","address1","city","region","age","gender","role","purchaseHistory","length","map","history","ticketId","eventId","name","Date","dateOfEvent","toLocaleDateString","purchaseDate","used","QRCode","src","alt","_id"],"sources":["C:/Users/Administrator/Desktop/Sa-adh/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { fetchUserProfile } from '../services/api';\r\nimport './Profile.css';\r\n\r\nfunction Profile() {\r\n  const [user, setUser] = useState(null);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loadUserProfile = async () => {\r\n      try {\r\n        const data = await fetchUserProfile();\r\n        setUser(data);\r\n      } catch (err) {\r\n        setError('Error fetching profile data.');\r\n        console.error(err);\r\n      }\r\n    };\r\n\r\n    loadUserProfile();\r\n  }, []);\r\n\r\n  if (!user) {\r\n    return <p>Loading profile...</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      <h1>Profile</h1>\r\n      {error && <p className=\"error\">{error}</p>}\r\n      <div className=\"profile-details\">\r\n        <h2>Personal Details</h2>\r\n        <p><strong>Name:</strong> {user.fullName}</p>\r\n        <p><strong>Email:</strong> {user.email}</p>\r\n        <p><strong>Phone:</strong> {user.phoneNumber}</p>\r\n        <p><strong>Address:</strong> {`${user.address.address1}, ${user.address.city}, ${user.address.region}`}</p>\r\n        <p><strong>Age:</strong> {user.age}</p>\r\n        <p><strong>Gender:</strong> {user.gender}</p>\r\n        <p><strong>Role:</strong> {user.role}</p>\r\n      </div>\r\n\r\n      <div className=\"purchase-history\">\r\n        <h2>Purchase History</h2>\r\n        {user.purchaseHistory.length === 0 ? (\r\n          <p>No tickets purchased yet.</p>\r\n        ) : (\r\n          <ul>\r\n            {user.purchaseHistory.map((history) => (\r\n              <li key={history.ticketId._id}>\r\n                <p><strong>Event:</strong> {history.ticketId.eventId.name}</p>\r\n                <p><strong>Date:</strong> {new Date(history.ticketId.eventId.dateOfEvent).toLocaleDateString()}</p>\r\n                <p><strong>Purchase Date:</strong> {new Date(history.purchaseDate).toLocaleDateString()}</p>\r\n                <p><strong>Used:</strong> {history.used ? 'Yes' : 'No'}</p>\r\n                {history.ticketId.QRCode && (\r\n                  <div>\r\n                    <p><strong>QR Code:</strong></p>\r\n                    <img src={history.ticketId.QRCode} alt=\"QR Code\" />\r\n                  </div>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}