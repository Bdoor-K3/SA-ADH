{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useTranslation}from'react-i18next';import{fetchUserProfile}from'../services/api';import'./Profile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const{t}=useTranslation();const[user,setUser]=useState(null);const[purchaseHistory,setPurchaseHistory]=useState([]);const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const loadUserProfile=async()=>{try{const data=await fetchUserProfile();setUser(data.user);setPurchaseHistory(data.purchaseHistory||[]);}catch(err){setError(t('profile.error'));console.error(err);}finally{setIsLoading(false);}};loadUserProfile();},[t]);if(isLoading){return/*#__PURE__*/_jsx(\"p\",{className:\"loading\",children:t('profile.loading')});}if(error){return/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error});}if(!user){return/*#__PURE__*/_jsx(\"p\",{className:\"no-data\",children:t('profile.noData')});}return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t('profile.title')}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('profile.sections.personalDetails')}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.name'),\":\"]}),\" \",user.fullName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.email'),\":\"]}),\" \",user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.phone'),\":\"]}),' ',user.phoneNumber||t('profile.placeholders.noPhone')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.address'),\":\"]}),' ',user.address?`${user.address.address1}, ${user.address.city}, ${user.address.region}`:t('profile.placeholders.noAddress')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.age'),\":\"]}),\" \",user.age||t('profile.placeholders.noAge')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.gender'),\":\"]}),\" \",user.gender||t('profile.placeholders.noAge')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.role'),\":\"]}),\" \",user.role]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"purchase-history\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('profile.sections.purchaseHistory')}),purchaseHistory.length===0?/*#__PURE__*/_jsx(\"p\",{children:t('profile.placeholders.noTickets')}):/*#__PURE__*/_jsx(\"ul\",{className:\"ticket-list\",children:purchaseHistory.map((purchase,index)=>{const ticket=purchase.ticketId;const event=purchase.eventId;if(!ticket||!event){return null;}return/*#__PURE__*/_jsxs(\"li\",{className:\"ticket-item\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.event'),\":\"]}),\" \",event.name||t('profile.labels.noEvent')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.date'),\":\"]}),\" \",new Date(event.dateOfEvent).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.purchaseDate'),\":\"]}),\" \",new Date(purchase.purchaseDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.amount'),\":\"]}),\" \",`${purchase.amount} ${purchase.currency}`]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.paid'),\":\"]}),\" \",purchase.paid?'Yes':'No']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.used'),\":\"]}),\" \",purchase.used?'Yes':'No']}),ticket.QRCodeImage&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[t('profile.labels.qrCode'),\":\"]})}),/*#__PURE__*/_jsx(\"img\",{src:ticket.QRCodeImage,alt:t('profile.labels.qrCode'),className:\"qr-code\"})]})]},index);})})]})]})]});}export default Profile;","map":{"version":3,"names":["React","useEffect","useState","useTranslation","fetchUserProfile","jsx","_jsx","jsxs","_jsxs","Profile","t","user","setUser","purchaseHistory","setPurchaseHistory","error","setError","isLoading","setIsLoading","loadUserProfile","data","err","console","className","children","fullName","email","phoneNumber","address","address1","city","region","age","gender","role","length","map","purchase","index","ticket","ticketId","event","eventId","name","Date","dateOfEvent","toLocaleDateString","purchaseDate","amount","currency","paid","used","QRCodeImage","src","alt"],"sources":["C:/Users/Administrator/Desktop/Sa-adh/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { fetchUserProfile } from '../services/api';\r\nimport './Profile.css';\r\n\r\nfunction Profile() {\r\n  const { t } = useTranslation();\r\n  const [user, setUser] = useState(null);\r\n  const [purchaseHistory, setPurchaseHistory] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadUserProfile = async () => {\r\n      try {\r\n        const data = await fetchUserProfile();\r\n        setUser(data.user);\r\n        setPurchaseHistory(data.purchaseHistory || []);\r\n      } catch (err) {\r\n        setError(t('profile.error'));\r\n        console.error(err);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadUserProfile();\r\n  }, [t]);\r\n\r\n  if (isLoading) {\r\n    return <p className=\"loading\">{t('profile.loading')}</p>;\r\n  }\r\n\r\n  if (error) {\r\n    return <p className=\"error\">{error}</p>;\r\n  }\r\n\r\n  if (!user) {\r\n    return <p className=\"no-data\">{t('profile.noData')}</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      <h1>{t('profile.title')}</h1>\r\n      <div className=\"profile-container\">\r\n        {/* Personal Details */}\r\n        <div className=\"profile-details\">\r\n          <h2>{t('profile.sections.personalDetails')}</h2>\r\n          <p><strong>{t('profile.labels.name')}:</strong> {user.fullName}</p>\r\n          <p><strong>{t('profile.labels.email')}:</strong> {user.email}</p>\r\n          <p>\r\n            <strong>{t('profile.labels.phone')}:</strong>{' '}\r\n            {user.phoneNumber || t('profile.placeholders.noPhone')}\r\n          </p>\r\n          <p>\r\n            <strong>{t('profile.labels.address')}:</strong>{' '}\r\n            {user.address\r\n              ? `${user.address.address1}, ${user.address.city}, ${user.address.region}`\r\n              : t('profile.placeholders.noAddress')}\r\n          </p>\r\n          <p><strong>{t('profile.labels.age')}:</strong> {user.age || t('profile.placeholders.noAge')}</p>\r\n          <p><strong>{t('profile.labels.gender')}:</strong> {user.gender || t('profile.placeholders.noAge')}</p>\r\n          <p><strong>{t('profile.labels.role')}:</strong> {user.role}</p>\r\n        </div>\r\n\r\n        {/* Purchase History */}\r\n        <div className=\"purchase-history\">\r\n          <h2>{t('profile.sections.purchaseHistory')}</h2>\r\n          {purchaseHistory.length === 0 ? (\r\n            <p>{t('profile.placeholders.noTickets')}</p>\r\n          ) : (\r\n            <ul className=\"ticket-list\">\r\n              {purchaseHistory.map((purchase, index) => {\r\n                const ticket = purchase.ticketId;\r\n                const event = purchase.eventId;\r\n\r\n                if (!ticket || !event) {\r\n                  return null;\r\n                }\r\n\r\n                return (\r\n                  <li key={index} className=\"ticket-item\">\r\n                    <p><strong>{t('profile.labels.event')}:</strong> {event.name || t('profile.labels.noEvent')}</p>\r\n                    <p><strong>{t('profile.labels.date')}:</strong> {new Date(event.dateOfEvent).toLocaleDateString()}</p>\r\n                    <p><strong>{t('profile.labels.purchaseDate')}:</strong> {new Date(purchase.purchaseDate).toLocaleDateString()}</p>\r\n                    <p><strong>{t('profile.labels.amount')}:</strong> {`${purchase.amount} ${purchase.currency}`}</p>\r\n                    <p><strong>{t('profile.labels.paid')}:</strong> {purchase.paid ? 'Yes' : 'No'}</p>\r\n                    <p><strong>{t('profile.labels.used')}:</strong> {purchase.used ? 'Yes' : 'No'}</p>\r\n                    {ticket.QRCodeImage && (\r\n                      <div>\r\n                        <p><strong>{t('profile.labels.qrCode')}:</strong></p>\r\n                        <img src={ticket.QRCodeImage} alt={t('profile.labels.qrCode')} className=\"qr-code\" />\r\n                      </div>\r\n                    )}\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}