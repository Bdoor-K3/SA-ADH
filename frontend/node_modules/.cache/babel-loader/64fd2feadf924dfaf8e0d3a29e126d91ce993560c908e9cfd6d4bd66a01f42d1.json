{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import{getEventById,purchaseTicket}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EventDetails(){const{id}=useParams();const navigate=useNavigate();const[event,setEvent]=useState(null);const[qrCode,setQrCode]=useState(null);const[error,setError]=useState('');useEffect(()=>{const fetchEventDetails=async()=>{try{const data=await getEventById(id);setEvent(data);}catch(err){setError('Error fetching event details');console.error(err);}};fetchEventDetails();},[id]);const handlePurchaseTicket=async()=>{try{const response=await purchaseTicket(id);alert('Ticket purchased successfully!');setQrCode(response.ticket.QRCode);// Set the QR code from the response\n}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Error purchasing ticket');}};if(!event){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading event details...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"event-details\",children:[/*#__PURE__*/_jsx(\"h1\",{children:event.name}),/*#__PURE__*/_jsx(\"p\",{children:event.description}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date of Event: \",new Date(event.dateOfEvent).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",event.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tickets Available: \",event.ticketsAvailable]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Purchase Start Date: \",new Date(event.purchaseStartDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Purchase End Date: \",new Date(event.purchaseEndDate).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePurchaseTicket,children:\"Buy Ticket\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),qrCode&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Ticket QR Code\"}),/*#__PURE__*/_jsx(\"img\",{src:qrCode,alt:\"QR Code\"})]})]});}export default EventDetails;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","getEventById","purchaseTicket","jsx","_jsx","jsxs","_jsxs","EventDetails","id","navigate","event","setEvent","qrCode","setQrCode","error","setError","fetchEventDetails","data","err","console","handlePurchaseTicket","response","alert","ticket","QRCode","_err$response","_err$response$data","message","children","className","name","description","Date","dateOfEvent","toLocaleDateString","price","ticketsAvailable","purchaseStartDate","purchaseEndDate","onClick","src","alt"],"sources":["C:/Users/Administrator/Desktop/Sa-adh/frontend/src/pages/EventDetails.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { getEventById, purchaseTicket } from '../services/api';\r\n\r\nfunction EventDetails() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [event, setEvent] = useState(null);\r\n  const [qrCode, setQrCode] = useState(null);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchEventDetails = async () => {\r\n      try {\r\n        const data = await getEventById(id);\r\n        setEvent(data);\r\n      } catch (err) {\r\n        setError('Error fetching event details');\r\n        console.error(err);\r\n      }\r\n    };\r\n\r\n    fetchEventDetails();\r\n  }, [id]);\r\n\r\n  const handlePurchaseTicket = async () => {\r\n    try {\r\n      const response = await purchaseTicket(id);\r\n      alert('Ticket purchased successfully!');\r\n      setQrCode(response.ticket.QRCode); // Set the QR code from the response\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Error purchasing ticket');\r\n    }\r\n  };\r\n\r\n  if (!event) {\r\n    return <p>Loading event details...</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"event-details\">\r\n      <h1>{event.name}</h1>\r\n      <p>{event.description}</p>\r\n      <p>Date of Event: {new Date(event.dateOfEvent).toLocaleDateString()}</p>\r\n      <p>Price: ${event.price}</p>\r\n      <p>Tickets Available: {event.ticketsAvailable}</p>\r\n      <p>Purchase Start Date: {new Date(event.purchaseStartDate).toLocaleDateString()}</p>\r\n      <p>Purchase End Date: {new Date(event.purchaseEndDate).toLocaleDateString()}</p>\r\n\r\n      <button onClick={handlePurchaseTicket}>Buy Ticket</button>\r\n      {error && <p className=\"error\">{error}</p>}\r\n\r\n      {qrCode && (\r\n        <div>\r\n          <h2>Your Ticket QR Code</h2>\r\n          <img src={qrCode} alt=\"QR Code\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EventDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}